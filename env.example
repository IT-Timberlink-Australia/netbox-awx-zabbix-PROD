# =============================================================================
# NetBox â‡„ Zabbix Integration - Environment Variables
# =============================================================================
# This file documents all environment variables used by the playbooks.
# In AWX/Ansible Tower, these should be configured as:
# - Credentials (for sensitive data like tokens)
# - Template Variables (for configuration data)
# - Environment Variables (for runtime configuration)
#
# Copy this file to .env and fill in your values for local development.
# =============================================================================

# =============================================================================
# NETBOX CONFIGURATION
# =============================================================================
# AWX Credential Type: Machine Credential or Custom Credential
# Template Variable: Can be set at template level
# Description: NetBox API endpoint and authentication

# NetBox API Base URL (required)
# Examples:
#   https://netbox.example.com
#   https://netbox.example.com/api
#   https://netbox.internal.company.com
#   https://netbox.timberlinkaustralia.com.au
NETBOX_API=https://netbox.timberlinkaustralia.com.au

# NetBox API Token (required - SENSITIVE)
# AWX: Store as Machine Credential or Custom Credential
# Description: API token for NetBox authentication
NETBOX_TOKEN=your_netbox_api_token_here

# NetBox SSL Certificate Verification (optional)
# AWX: Template Variable or Environment Variable
# Values: true/false (default: true)
# Description: Whether to verify SSL certificates for NetBox API calls
NETBOX_VERIFY=true

# Alternative NetBox URL environment variable names (for compatibility)
# These are checked as fallbacks in zabbix_remove.yml
# NETBOX_URL=https://netbox.example.com
# NETBOX_HOST_URL=https://netbox.example.com

# =============================================================================
# ZABBIX CONFIGURATION
# =============================================================================
# AWX Credential Type: Machine Credential or Custom Credential
# Template Variable: Can be set at template level
# Description: Zabbix API endpoint and authentication

# Zabbix API URL (required)
# Examples:
#   https://zabbix.example.com/api_jsonrpc.php
#   https://zabbix.internal.company.com/zabbix/api_jsonrpc.php
#   https://monitoring.company.com/api_jsonrpc.php
#   https://itmonitor.timberlinkaustralia.com.au/zabbix
ZABBIX_API_URL=https://itmonitor.timberlinkaustralia.com.au/zabbix

# Zabbix API Token (required - SENSITIVE)
# AWX: Store as Machine Credential or Custom Credential
# Description: API token for Zabbix authentication
ZABBIX_API_TOKEN=your_zabbix_api_token_here

# Zabbix SSL Certificate Verification (optional)
# AWX: Template Variable or Environment Variable
# Values: true/false (default: false for Zabbix, true for NetBox)
# Description: Whether to verify SSL certificates for Zabbix API calls
# Note: Often set to false initially due to self-signed certificates
ZABBIX_VERIFY=false

# Alternative Zabbix URL environment variable names (for compatibility)
# These are checked as fallbacks in zabbix_remove.yml
# ZABBIX_URL=https://zabbix.example.com
# ZABBIX_HOST_URL=https://zabbix.example.com

# =============================================================================
# REMOVAL OPERATION CONFIGURATION
# =============================================================================
# AWX: Template Variables
# Description: Configuration for zabbix_remove.yml playbook

# Removal Mode (optional)
# AWX: Template Variable
# Values: disable (default) | delete
# Description: How to remove hosts from Zabbix
# - disable: Soft removal - host is disabled but not deleted
# - delete: Hard removal - host is permanently deleted
ZBX_REMOVE_MODE=disable

# NetBox Status After Removal (optional)
# AWX: Template Variable
# Values: Any valid NetBox status (default: removed)
# Description: Status to set in NetBox custom fields after successful removal
# Examples: removed, decommissioned, archived, retired
NB_REMOVE_STATUS=removed

# =============================================================================
# AWX/ANSIBLE TOWER CONFIGURATION NOTES
# =============================================================================

# CREDENTIALS SETUP:
# 1. Create Machine Credentials for:
#    - NetBox API Token (store as NETBOX_TOKEN)
#    - Zabbix API Token (store as ZABBIX_API_TOKEN)
#
# 2. Or create Custom Credentials with:
#    - Input Configuration: Username/Password fields
#    - Injector Configuration: Environment variables
#
# TEMPLATE VARIABLES:
# Set these at the Job Template level:
# - NETBOX_API
# - ZABBIX_API_URL
# - NETBOX_VERIFY
# - ZABBIX_VERIFY
# - ZBX_REMOVE_MODE (for removal jobs)
# - NB_REMOVE_STATUS (for removal jobs)

# INVENTORY CONFIGURATION:
# - Use NetBox inventory plugin
# - Configure query filters based on custom field values
# - Sync jobs: cf_zbp_status = "not_synced"
# - Remove jobs: cf_zbp_status = "remove_pending"

# =============================================================================
# NETBOX CUSTOM FIELDS REFERENCE
# =============================================================================
# The following custom fields must be configured in NetBox:

# REQUIRED CUSTOM FIELDS:
# - zbp_pri_template_name_id: Primary Zabbix template ID (integer)
# - zbp_pri_template_int_id: Interface type (1=Agent, 2=SNMP, 3=IPMI, 4=JMX)
# - zbp_int_ip: Interface IP address (string)
# - zbp_group_id: Zabbix host group ID (integer)

# OPTIONAL CUSTOM FIELDS:
# - zbp_vname: Visible name in Zabbix (string, defaults to hostname)
# - zb_extra_templates: Additional template IDs (list of integers)
# - zbp_proxy_id: Zabbix proxy ID (integer)
# - zb_mon_env: Environment tag (string)
# - zbp_platform: OS platform tag (string)
# - zbp_site: Site tag (string)
# - zbp_sla_code: SLA code tag (string)

# MANAGED CUSTOM FIELDS (set by playbooks):
# - zbp_status: Sync status (not_synced, synced, remove_pending, removed)
# - zbp_last_sync: Last sync timestamp (ISO format)
# - zbp_sync_hint: Error details (string)

# =============================================================================
# LOCAL DEVELOPMENT USAGE
# =============================================================================
# 1. Copy this file to .env
# 2. Fill in your actual values
# 3. Source the environment: export $(grep -v '^#' .env | xargs)
# 4. Run playbooks: ansible-playbook -i inventory/netbox.yml zabbix_sync.yml

# =============================================================================
# SECURITY NOTES
# =============================================================================
# - Never commit .env files to version control
# - Use AWX credentials for production environments
# - Rotate API tokens regularly
# - Use least-privilege access for API tokens
# - Consider using AWX credential types for better security
